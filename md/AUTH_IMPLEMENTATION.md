# Реализация Авторизации и Регистрации

## Установленные библиотеки
- `zod` - валидация схем данных
- `react-hook-form` - управление формами
- `@hookform/resolvers` - интеграция zod с react-hook-form

## Структура файлов

### 1. `/app/auth/schemas.ts`
Схемы валидации для форм:
- `loginSchema` - валидация логина (email + password)
- `registerSchema` - валидация регистрации (name, email, password, confirmPassword)

**Требования:**
- Email: корректный email адрес
- Пароль: минимум 6 символов
- Имя: минимум 2 символа
- Подтверждение пароля: должно совпадать с паролем

### 2. `/app/auth/page.tsx`
Переработанная форма авторизации с использованием react-hook-form:

**Функции:**
- `onLoginSubmit` - обработка входа через NextAuth credentials
- `onRegisterSubmit` - обработка регистрации через API

**Особенности:**
- Две отдельные формы для логина и регистрации
- Валидация в реальном времени (onBlur режим)
- Отображение ошибок валидации под каждым полем
- Кнопки disabled во время отправки формы
- Глобальные ошибки (неверный пароль, проблемы с сервером)

### 3. `/app/api/auth/register/route.ts`
API endpoint для регистрации новых пользователей:
- Валидация данных на сервере через zod
- Возврат структурированных ошибок
- TODO: интеграция с базой данных, хэширование паролей

### 4. `/app/auth/page.module.css`
Добавлены новые стили:
- `.inputError` - красная рамка для невалидных полей
- `.errorText` - мелкий текст ошибки под полем
- `.submitButton:disabled` - стиль для disabled кнопки

## Использование

### Логин
Для тестирования используйте:
- Email: `ivan@example.com`
- Password: `password123`

### Регистрация
1. Заполните все поля (имя, email, пароль, подтверждение)
2. Пароль должен быть минимум 6 символов
3. После успешной регистрации автоматический вход

## Валидация
- **Клиентская**: react-hook-form + zod
- **Серверная**: zod в API routes
- **Режим**: onBlur (проверка при потере фокуса)

## Безопасность
- ⚠️ **TODO**: Добавить хэширование паролей (bcrypt)
- ⚠️ **TODO**: Интеграция с базой данных
- ⚠️ **TODO**: CSRF защита
- ⚠️ **TODO**: Rate limiting для регистрации

